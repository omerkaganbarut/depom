# ğŸ”¬ Ã‡Ä°FT KAYIT/OYNATMA - ULTRA DETAYLI DEBUG REHBERÄ°

## ğŸ“š Ä°Ã‡Ä°NDEKÄ°LER
1. [BaÅŸlangÄ±Ã§: Arduino Ä°lk AÃ§Ä±lÄ±ÅŸ](#-baÅŸlangÄ±Ã§-arduino-ilk-aÃ§Ä±lÄ±ÅŸ)
2. [E Komutu: Encoder Okuma](#-e-komutu-encoder-okuma)
3. [M Komutu: Manuel Motor SÃ¼rme](#-m-komutu-manuel-motor-sÃ¼rme)
4. [CK Komutu: Ã‡ift KayÄ±t (Ultra DetaylÄ±)](#-ck-komutu-Ã§ift-kayit-ultra-detayli)
5. [CO Komutu: Ã‡ift Oynatma (Ä°lk Depo)](#-co-komutu-Ã§ift-oynatma-ilk-depo)
6. [CO Komutu: Ã‡ift Oynatma (Sonraki Depolar)](#-co-komutu-Ã§ift-oynatma-sonraki-depolar)
7. [OlasÄ± Sorunlar ve Ã‡Ã¶zÃ¼mleri](#-olasÄ±-sorunlar-ve-Ã§Ã¶zÃ¼mleri)
8. [Proje TutarsÄ±zlÄ±klarÄ±](#-proje-tutarsÄ±zlÄ±klarÄ±)

---

## ğŸš€ BAÅLANGIÃ‡: ARDUINO Ä°LK AÃ‡ILIÅ

### Arduino'ya GÃ¼Ã§ Verildi
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Arduino RESET                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Bootloader Ã§alÄ±ÅŸÄ±r (1-2 sn)     â”‚
â”‚ 2. setup() fonksiyonu Ã§aÄŸrÄ±lÄ±r      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### setup() Ä°Ã§inde Neler Oluyor?

#### [1/5] Serial BaÅŸlatma
```cpp
// main.cpp - setup()
Serial.begin(115200);
delay(500);
```
**NE OLDU:**
- Serial port aÃ§Ä±ldÄ± (115200 baud)
- 500ms bekle (port stabilize olsun)

#### [2/5] Encoder'lar BaÅŸlatÄ±lÄ±yor
```cpp
zEnc.begin();
xEnc.begin();
bigEnc.begin();
```
**NE OLDU (her encoder iÃ§in):**
```cpp
// stepmotorenkoderiokuma.cpp - begin()
pinMode(_pinA, INPUT_PULLUP);  // A fazÄ± pull-up ile input
pinMode(_pinB, INPUT_PULLUP);  // B fazÄ± pull-up ile input
_lastB = digitalRead(_pinB);   // Ä°lk B durumu oku

// Interrupt baÄŸla (Ã¶rnek: ENC3_A_PIN = 18)
attachInterrupt(digitalPinToInterrupt(_pinA), isrRouter2, CHANGE);
```
**SONUÃ‡:** Her encoder kesmesi aktif, pozisyon sayÄ±mÄ± baÅŸladÄ±.

#### [3/5] MoveTo ModÃ¼lÃ¼ Setup
```cpp
moveToSetup(&zEnc, &xEnc, &bigEnc);
```
**NE OLDU:**
```cpp
// MoveTo.cpp - moveToSetup()
encoders[MOTOR_Z] = &zEnc;   // Pointer kaydedildi
encoders[MOTOR_X] = &xEnc;
encoders[MOTOR_B] = &bigEnc;
```
**SONUÃ‡:** MoveTo artÄ±k encoder'lara eriÅŸebilir.

#### [4/5] KayÄ±t ve Oynatma ModÃ¼lleri
```cpp
kayitEncoderSetup(&bigEnc);
oynatmaEncoderSetup(&bigEnc, &zEnc);
oynatmaParametreSetup(&bigFreqMin, &bigFreqMax, &zEncMin, &zEncMax);
```
**NE OLDU:** Encoder pointer'larÄ± ve parametre pointer'larÄ± kaydedildi.

#### [5/5] Ã‡ift KayÄ±t/Oynatma ModÃ¼lleri
```cpp
ckEncoderSetup(&bigEnc, &xEnc);
coEncoderSetup(&bigEnc, &xEnc, &zEnc);
coParametreSetup(&bigFreqMin, &bigFreqMax, &zEncMin, &zEncMax);
```
**NE OLDU:** TÃ¼m modÃ¼ller artÄ±k encoder'lara ve parametrelere eriÅŸebilir.

### MenÃ¼ YazdÄ±rÄ±ldÄ±
```cpp
yazdirMenu();
```
**EKRANDA:** Komut listesi gÃ¶rÃ¼nÃ¼r.

### setup() Bitti â†’ loop() BaÅŸladÄ±
```cpp
void loop() {
  // Arka plan iÅŸleyicileri
  moveToRun();
  kayitRun();
  oynatmaRun();
  ckRun();
  coRun();
  
  // Komut dinleme
  if (Serial.available()) {
    char cmd = Serial.read();
    switch (cmd) { ... }
  }
}
```

---

## ğŸ“Š E KOMUTU: ENCODER OKUMA

### Senaryo: E TuÅŸladÄ±k

#### [1] Serial Buffer'da 'E' Var
```cpp
// loop() iÃ§inde
if (Serial.available()) {  // true (1 karakter bekliyor)
  char cmd = Serial.read();  // cmd = 'E'
  
  switch (cmd) {
    case 'E':
      handleEncoderOku();  // â† Ã‡aÄŸrÄ±ldÄ±
      break;
  }
}
```

#### [2] handleEncoderOku() Ã‡alÄ±ÅŸtÄ±
```cpp
void handleEncoderOku() {
  Serial.println(F("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"));
  Serial.println(F("â•‘          ENCODER POZÄ°SYONLARI                  â•‘"));
  Serial.println(F("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"));
  
  // Encoder deÄŸerlerini oku
  long z = zEnc.getPosition();    // Ã–rnek: -250
  long x = xEnc.getPosition();    // Ã–rnek: 5000
  long big = bigEnc.getPosition(); // Ã–rnek: 12458
  
  // YazdÄ±r
  Serial.print(F("  Motor Z (YukarÄ±-AÅŸaÄŸÄ±) : "));
  Serial.println(z);
  
  Serial.print(F("  Motor X (SaÄŸa-Sola)    : "));
  Serial.println(x);
  
  Serial.print(F("  Motor BIG (DÃ¶ner)      : "));
  Serial.println(big);
  
  Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n"));
}
```

**EKRANDA:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          ENCODER POZÄ°SYONLARI                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Motor Z (YukarÄ±-AÅŸaÄŸÄ±) : -250
  Motor X (SaÄŸa-Sola)    : 5000
  Motor BIG (DÃ¶ner)      : 12458
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

#### [3] loop() Devam Ediyor
```cpp
// handleEncoderOku() bitti, return edildi
// loop() baÅŸa dÃ¶ndÃ¼, Serial yeni komut bekliyor
```

**Ã–NEMLÄ°:** E komutu **BLOCKING deÄŸil**. Encoder'larÄ± okuyup yazdÄ±rÄ±r, biter.

---

## ğŸ® M KOMUTU: MANUEL MOTOR SÃœRME

### Senaryo: M Komutu ile Z Motoru SÃ¼rme

#### [1] Serial'de 'M' YazdÄ±k
```
KullanÄ±cÄ± klavyeden ÅŸunu yazdÄ±: M
Serial buffer: 'M'
```

#### [2] loop() - 'M' AlgÄ±landÄ±
```cpp
if (Serial.available()) {  // true
  char cmd = Serial.read();  // cmd = 'M'
  
  switch (cmd) {
    case 'M':
      handleMoveTo();  // â† Ã‡aÄŸrÄ±ldÄ±
      break;
  }
}
```

#### [3] handleMoveTo() Ä°Ã§inde
```cpp
void handleMoveTo() {
  Serial.println(F("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"));
  Serial.println(F("â•‘              MOVETO (Ä°VMELÄ°)                   â•‘"));
  Serial.println(F("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"));
  Serial.println(F("  Motor (Z/X/B): "));
  
  // [BLOCKING BEKLE] KullanÄ±cÄ±dan motor seÃ§imi
  while (Serial.available() == 0) {
    delay(10);  // â† BURADA BEKLE
  }
  
  char motorChar = Serial.read();  // motorChar = 'Z'
  Serial.println(motorChar);
  
  uint8_t motor;
  if (motorChar == 'Z' || motorChar == 'z') {
    motor = MOTOR_Z;  // motor = 0
  }
  // ...
  
  Serial.println(F("  Hedef encoder: "));
  
  // [BLOCKING BEKLE] KullanÄ±cÄ±dan hedef encoder
  while (Serial.available() == 0) {
    delay(10);
  }
  
  long hedef = Serial.parseInt();  // hedef = -500
  Serial.println(hedef);
  
  Serial.println(F("  Max Hz: "));
  
  // [BLOCKING BEKLE] KullanÄ±cÄ±dan hÄ±z
  while (Serial.available() == 0) {
    delay(10);
  }
  
  unsigned int hz = Serial.parseInt();  // hz = 50
  Serial.println(hz);
  
  // [KRÄ°TÄ°K] moveTo() Ã§aÄŸrÄ±lÄ±yor
  if (moveTo(motor, hedef, hz)) {  // â† moveTo(0, -500, 50)
    Serial.println(F("âœ“ MoveTo baÅŸlatÄ±ldÄ±!\n"));
  } else {
    Serial.println(F("âœ— MoveTo baÅŸlatÄ±lamadÄ±!\n"));
  }
  
  // handleMoveTo() bitti, return
}
```

**EKRANDA:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              MOVETO (Ä°VMELÄ°)                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Motor (Z/X/B): Z
  Hedef encoder: -500
  Max Hz: 50
âœ“ MoveTo baÅŸlatÄ±ldÄ±!
```

#### [4] moveTo(MOTOR_Z, -500, 50) Ä°Ã§inde - Ä°LK KOD Ã‡AÄRISI
```cpp
// MoveTo.cpp - moveTo()
bool moveTo(uint8_t motorIndex, long hedefEnc, unsigned int maxHz) {
  // [KONTROL 1] Motor zaten aktif mi?
  if (st[motorIndex].aktif) {
    Serial.println(F("âœ— Motor zaten aktif!"));
    return false;
  }
  // âœ“ GeÃ§ti (motor durmuÅŸ)
  
  // [HESAPLAMA 1] Mevcut pozisyon
  long mevcutEnc = encoders[motorIndex]->getPosition();
  // mevcutEnc = 0 (Z encoder baÅŸlangÄ±Ã§ta 0)
  
  // [HESAPLAMA 2] Mesafe ve yÃ¶n
  long fark = hedefEnc - mevcutEnc;  // -500 - 0 = -500
  unsigned long toplamPulse = (unsigned long)abs(fark);  // 500
  int yon = (fark > 0) ? 0 : 1;  // yon = 1 (geri)
  
  // [HESAPLAMA 3] HÄ±z limitler
  if (maxHz < MIN_SPEED_HZ) maxHz = MIN_SPEED_HZ;
  if (maxHz > 2000) maxHz = 2000;
  // maxHz = 50 (zaten sÄ±nÄ±rlar iÃ§inde)
  
  // [KRÄ°TÄ°K] Durumu ayarla
  st[motorIndex].aktif = true;
  st[motorIndex].hedefEnc = -500;
  st[motorIndex].toplamPulse = 500;
  st[motorIndex].kalanPulse = 500;
  st[motorIndex].yon = 1;
  st[motorIndex].maxHz = 50;
  st[motorIndex].bittiEdge = false;
  
  // [FAZ BELÄ°RLE] Mesafe kontrolÃ¼
  if (toplamPulse < ACCEL_RAMP_PULSE) {  // 500 < 200? HAYIR
    // Normal trapezoid profil
    st[motorIndex].faz = FAZ_HIZLANMA;
  }
  
  // [Ä°LK SEGMENT] Ä°lk segment hesapla
  unsigned int ilkHiz = hesaplaHiz(&st[motorIndex]);
  // ilkHiz â‰ˆ 10 Hz (minimum hÄ±zdan baÅŸla)
  
  unsigned long ilkSegmentPulse = hesaplaSegmentPulse(ilkHiz);
  // ilkSegmentPulse â‰ˆ 1-2 pulse (hÄ±za gÃ¶re)
  
  // [pulseAt Ã‡AÄRI] Ä°lk segment baÅŸlat
  useMotor(motorIndex);
  pulseAt(ilkSegmentPulse, yon, ilkHiz);
  
  // moveTo() baÅŸarÄ±yla tamamlandÄ±
  return true;
}
```

**Ã–NEMLÄ° NOKTALAR:**
- `st[MOTOR_Z].aktif = true` â†’ ArtÄ±k motor aktif
- `st[MOTOR_Z].kalanPulse = 500` â†’ Hedefe 500 pulse kaldÄ±
- `pulseAt(1, 1, 10)` â†’ Ä°lk segment: 1 pulse, geri yÃ¶n, 10 Hz

#### [5] pulseAt(1, 1, 10) Ä°Ã§inde - Ä°LK SEGMENT BAÅLATMA
```cpp
// PulseAt.cpp - pulseAt()
void pulseAt(unsigned long toplamPulse, int yon, unsigned int hertz) {
  uint8_t m = aktifMotorIndex;  // m = MOTOR_Z (0)
  
  // [KONTROL] toplamPulse > 0 mÄ±?
  if (toplamPulse > 0) {
    // [YENÄ° Ä°Å BAÅLATMA MODU]
    
    int stepPin = stepPins[m];  // STEP1_PIN (5)
    int dirPin = dirPins[m];    // DIR1_PIN (36)
    int enaPin = enaPins[m];    // ENA1_PIN (37)
    
    // [YÃ–N AYARI] DIR pini ayarla
    digitalWrite(dirPin, yon);  // DIR1_PIN = HIGH (geri)
    
    // [ENABLE AYARI] Motoru aktif et
    digitalWrite(enaPin, LOW);  // ENA1_PIN = LOW (aktif)
    
    // [DURUM AYARI] Motor durumunu kaydet
    pulseStates[m].aktif = true;
    pulseStates[m].hedef = 1;      // 1 pulse hedefi
    pulseStates[m].sayac = 0;      // BaÅŸlangÄ±Ã§
    pulseStates[m].yon = 1;
    pulseStates[m].hertz = 10;
    pulseStates[m].bittiEdge = false;
    
    // [ZAMAN HESABI] Bir pulse sÃ¼resi
    pulseStates[m].pulse_us = (hertz > 0) ? (1000000UL / hertz) : 10000;
    // pulse_us = 1000000 / 10 = 100000 Âµs (0.1 saniye)
    
    pulseStates[m].sonZaman_us = micros();  // Åu anki zaman
    
    // pulseAt() bitti (yeni iÅŸ baÅŸlatma modu)
    return;
  }
  
  // ... arka plan modu (toplamPulse = 0 olduÄŸunda)
}
```

**Ã–NEMLÄ°:** Ä°lk segment baÅŸlatÄ±ldÄ±, motor aktif! Ama henÃ¼z pulse atmadÄ±.

#### [6] loop() - Ä°lk DÃ¶ngÃ¼ Devam Ediyor
```cpp
void loop() {
  moveToRun();  // â† ÅÄ°MDÄ° BU AKTÄ°F!
  kayitRun();   // KAPALI
  oynatmaRun(); // KAPALI
  ckRun();      // KAPALI
  coRun();      // KAPALI
  
  if (Serial.available()) { ... }
}
```

#### [7] moveToRun() - Ä°LK Ã‡AÄRI
```cpp
// MoveTo.cpp - moveToRun()
void moveToRun() {
  for (uint8_t m = 0; m < 3; m++) {  // Her motor iÃ§in
    if (!st[m].aktif) continue;  // m=0 (Z) aktif â†’ devam
    
    // [1] pulseAt arka planÄ±nÄ± Ã§alÄ±ÅŸtÄ±r
    useMotor(m);
    pulseAt(0, 0, 0);  // â† ARKA PLAN MODU
    
    // ... (devam edecek)
  }
}
```

#### [8] pulseAt(0, 0, 0) - ARKA PLAN MODU (Ä°LK PULSE)
```cpp
void pulseAt(unsigned long toplamPulse, int yon, unsigned int hertz) {
  uint8_t m = aktifMotorIndex;  // m = MOTOR_Z (0)
  
  // [KONTROL] toplamPulse = 0 mÄ±?
  if (toplamPulse == 0) {
    // [ARKA PLAN MODU]
    
    // [KONTROL] Motor aktif mi?
    if (!pulseStates[m].aktif) return;  // âœ“ Aktif
    
    // [ZAMAN KONTROLÃœ] Pulse zamanÄ± geldi mi?
    unsigned long simdi = micros();  // Ã–rn: 1000 Âµs geÃ§ti
    unsigned long gecen = simdi - pulseStates[m].sonZaman_us;
    
    if (gecen >= pulseStates[m].pulse_us) {  // 1000 â‰¥ 100000? HAYIR
      // HenÃ¼z pulse zamanÄ± gelmedi
      return;
    }
    
    // (Bu noktaya ulaÅŸmadÄ±k Ã§Ã¼nkÃ¼ henÃ¼z zaman geÃ§medi)
  }
}
```

**DÃ–NGÃœ DEVAM EDER:**
```
loop() â†’ moveToRun() â†’ pulseAt(0,0,0) â†’ Zaman yetmedi â†’ return
loop() â†’ moveToRun() â†’ pulseAt(0,0,0) â†’ Zaman yetmedi â†’ return
...
(100000 Âµs = 0.1 saniye geÃ§ene kadar)
```

#### [8.2] pulseAt(0, 0, 0) - Ä°LK PULSE ATIYOR
```cpp
// 100000 Âµs geÃ§ti, pulse zamanÄ± geldi!

if (gecen >= pulseStates[m].pulse_us) {  // 100000 â‰¥ 100000? EVET!
  
  // [PULSE ÃœRETÄ°M] STEP pini HIGH â†’ LOW
  int stepPin = stepPins[m];  // STEP1_PIN (5)
  
  digitalWrite(stepPin, HIGH);      // â† Motor bir adÄ±m attÄ±
  delayMicroseconds(PULSE_HIGH_US); // 10 Âµs bekle
  digitalWrite(stepPin, LOW);
  
  // [SAYAÃ‡] Bir pulse atÄ±ldÄ±
  pulseStates[m].sayac++;  // sayac = 1
  
  // [ZAMAN] Sonraki pulse iÃ§in zaman kaydet
  pulseStates[m].sonZaman_us = micros();
  
  // [KONTROL] Hedef pulse sayÄ±sÄ±na ulaÅŸÄ±ldÄ± mÄ±?
  if (pulseStates[m].sayac >= pulseStates[m].hedef) {  // 1 â‰¥ 1? EVET!
    // [SEGMENT BÄ°TTÄ°]
    pulseStates[m].aktif = false;
    pulseStates[m].bittiEdge = true;  // â† "Segment bitti" bayraÄŸÄ±
  }
}
```

**SONUÃ‡:** Ä°lk segment (1 pulse) tamamlandÄ±!

#### [9] moveToRun() Devam Ediyor - SONRAKI SEGMENT
```cpp
void moveToRun() {
  for (uint8_t m = 0; m < 3; m++) {
    if (!st[m].aktif) continue;
    
    // [1] pulseAt arka planÄ±nÄ± Ã§alÄ±ÅŸtÄ±r
    useMotor(m);
    pulseAt(0, 0, 0);  // â† Segment bitti, bittiEdge = true
    
    // [2] Segment bitti mi?
    if (pulseAtBittiMi(m)) {  // EVET!
      
      // [3] Kalan pulse gÃ¼ncelle
      st[m].kalanPulse -= (pulseStates[m].hedef);
      // kalanPulse = 500 - 1 = 499
      
      // [4] Hedefe ulaÅŸÄ±ldÄ± mÄ±?
      if (st[m].kalanPulse == 0) {  // 499 == 0? HAYIR
        // Devam...
      }
      
      // [5] Faz geÃ§iÅŸi (HÄ±zlanma devam)
      unsigned long tamamlanan = st[m].toplamPulse - st[m].kalanPulse;
      // tamamlanan = 500 - 499 = 1
      
      if (st[m].faz == FAZ_HIZLANMA) {
        if (tamamlanan >= ACCEL_RAMP_PULSE) {  // 1 â‰¥ 200? HAYIR
          // HÄ±zlanma devam
        }
      }
      
      // [6] Sonraki segment baÅŸlat
      unsigned int hiz = hesaplaHiz(&st[m]);  // hiz â‰ˆ 11 Hz (biraz arttÄ±)
      unsigned long segmentPulse = hesaplaSegmentPulse(hiz);  // â‰ˆ 1-2
      
      if (segmentPulse > st[m].kalanPulse) segmentPulse = st[m].kalanPulse;
      
      useMotor(m);
      pulseAt(segmentPulse, st[m].yon, hiz);  // â† Yeni segment baÅŸladÄ±
    }
  }
}
```

**BU DÃ–NGÃœ DEVAM EDER:** Her loop'ta bir segment tamamlanÄ±r, hÄ±z yavaÅŸ yavaÅŸ artar, sonra sabit kalÄ±r, sonra yavaÅŸlar, hedefe ulaÅŸÄ±lÄ±r.

#### [10] Hedefe UlaÅŸÄ±ldÄ± (500. Pulse)
```cpp
if (st[m].kalanPulse == 0) {
  st[m].aktif = false;
  st[m].bittiEdge = true;
  st[m].faz = FAZ_KAPALI;
  // âœ“ Motor durdu!
}
```

#### [11] moveToBittiMi() KontrolÃ¼
```cpp
// KullanÄ±cÄ± kodu (veya baÅŸka bir modÃ¼l)
if (moveToBittiMi(MOTOR_Z)) {
  Serial.println("Z motoru hedefe ulaÅŸtÄ±!");
  // bittiEdge bir kez true dÃ¶ner, sonra false olur (edge detection)
}
```

**Ã–ZET:** M komutu â†’ moveTo() Ã§aÄŸrÄ±ldÄ± â†’ pulseAt() segmentler baÅŸlattÄ± â†’ moveToRun() her segment'i iÅŸledi â†’ Motor hedefe ulaÅŸtÄ±.

---

## ğŸ“ CK KOMUTU: Ã‡Ä°FT KAYIT (ULTRA DETAYLI)

### SENARYO: SÄ±fÄ±rdan CK Komutu

#### BAÅLANGIÃ‡ DURUMU
```
Arduino Ã§alÄ±ÅŸÄ±yor
loop() dÃ¶nÃ¼yor
ckRun() â†’ case CK_KAPALI: return; (hiÃ§bir ÅŸey yapmÄ±yor)
Serial bekliyor
```

### âš¡ [ADIM 1/7] 'CK' TUÅLANDI â†’ X1'E GÄ°DÄ°Å

#### [1.1] Serial Buffer'da 'C' Geldi
```cpp
// loop() - ilk Ã§aÄŸrÄ±
if (Serial.available()) {  // true
  char cmd = Serial.read();  // cmd = 'C'
  
  switch (cmd) {
    case 'C':
      // Ä°kinci karakteri bekle
      if (Serial.available() == 0) {
        delay(50);  // 50ms bekle
      }
      
      if (Serial.available() > 0) {
        char c2 = Serial.read();  // c2 = 'K'
        
        if (c2 == 'K' || c2 == 'k') {
          handleCiftKayit();  // â† Ã‡aÄŸrÄ±ldÄ±!
        }
      }
      break;
  }
}
```

#### [1.2] handleCiftKayit() Ä°Ã§inde
```cpp
void handleCiftKayit() {
  // [KONTROL 1] BaÅŸka iÅŸlem var mÄ±?
  if (ckAktifMi() || coAktifMi() || kayitAktifMi() || oynatmaAktifMi()) {
    Serial.println(F("\nâœ— BaÅŸka bir iÅŸlem devam ediyor!"));
    return;  // â† Fonksiyon biter, loop() devam eder
  }
  // âœ“ GeÃ§ti (hiÃ§bir iÅŸlem yok)
  
  // [EKRAN] Parametreleri gÃ¶ster
  Serial.println(F("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"));
  Serial.println(F("â•‘          Ã‡Ä°FT KAYIT PARAMETRELERÄ°              â•‘"));
  Serial.println(F("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"));
  Serial.print(F("  X1 Pozisyonu  : "));
  Serial.println(x1Pos);  // 5000
  Serial.print(F("  X2 Pozisyonu  : "));
  Serial.println(x2Pos);  // 12000
  Serial.println(F("  KayÄ±t1 YÃ¶nÃ¼   : Ä°leri (0â†’16000)"));
  Serial.println(F("  KayÄ±t2 YÃ¶nÃ¼   : Geri (16000â†’0)"));
  Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"));
  Serial.println(F("BaÅŸlatÄ±lsÄ±n mÄ±? (Y/N)"));
  Serial.print(F("> "));
  
  // [BEKLE] KullanÄ±cÄ±dan Y/N
  while (Serial.available() == 0) {
    delay(10);  // â† BURADA BEKLE (kullanÄ±cÄ± yazana kadar)
  }
  
  char onay = Serial.read();  // onay = 'Y'
  Serial.println(onay);
  
  if (onay == 'Y' || onay == 'y') {
    ckBaslat(x1Pos, x2Pos, 0, 1);  // â† ckBaslat() Ã§aÄŸrÄ±ldÄ±!
    Serial.println(F("\nâœ“ Ã‡ift kayÄ±t baÅŸlatÄ±ldÄ±!"));
  } else if (onay == 'N' || onay == 'n') {
    Serial.println(F("\nâœ— Ä°ptal edildi!"));
  }
  
  // handleCiftKayit() bitti, return
}
```

**EKRANDA:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          Ã‡Ä°FT KAYIT PARAMETRELERÄ°              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  X1 Pozisyonu  : 5000
  X2 Pozisyonu  : 12000
  KayÄ±t1 YÃ¶nÃ¼   : Ä°leri (0â†’16000)
  KayÄ±t2 YÃ¶nÃ¼   : Geri (16000â†’0)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
BaÅŸlatÄ±lsÄ±n mÄ±? (Y/N)
> Y

âœ“ Ã‡ift kayÄ±t baÅŸlatÄ±ldÄ±!
```

#### [1.3] ckBaslat(5000, 12000, 0, 1) Ä°Ã§inde
```cpp
// CiftKayitModulu.cpp
void ckBaslat(long x1Enc, long x2Enc, int kayit1Yon, int kayit2Yon) {
  Serial.println(F("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"));
  Serial.println(F("â•‘           Ã‡Ä°FT KAYIT BAÅLATILIYOR              â•‘"));
  Serial.println(F("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"));
  
  // [1] Z sÄ±fÄ±rlama bayraÄŸÄ±nÄ± sÄ±fÄ±rla (Ã‡ift Oynatma iÃ§in Ã¶nemli!)
  coZSifirlamaReset();  // â† zSifirlandiMi = false
  
  // [2] Parametreleri kaydet
  x1Hedef = 5000;
  x2Hedef = 12000;
  yon1 = 0;  // KayÄ±t1 ileri (0â†’16000)
  yon2 = 1;  // KayÄ±t2 geri (16000â†’0)
  
  // [3] Encoder kontrol
  if (bigEnc == nullptr || xEnc == nullptr) {  // âœ“ GeÃ§ti (var)
    Serial.println(F("\nâœ— Hata: Encoder'lar ayarlanmamÄ±ÅŸ!"));
    return;
  }
  
  // [4] X1'e git
  Serial.println(F("\n[ADIM 1/7] X1 pozisyonuna gidiliyor..."));
  
  if (!moveTo(MOTOR_X, x1Hedef, 100)) {  // â† moveTo(MOTOR_X, 5000, 100) Ã§aÄŸrÄ±ldÄ±!
    Serial.println(F("âœ— X motor hareket baÅŸlatÄ±lamadÄ±!"));
    return;
  }
  // âœ“ moveTo() baÅŸarÄ±lÄ± â†’ X motoru hareket ediyor
  
  // [5] Durumu deÄŸiÅŸtir
  durum = CK_X1_GIDIYOR;  // â† DURUM DEÄÄ°ÅTÄ°!
  
  // ckBaslat() bitti, return
}
```

**Ã–NEMLÄ° NOKTALAR:**
- `coZSifirlamaReset()` â†’ CO komutu iÃ§in Z sÄ±fÄ±rlama bayraÄŸÄ±nÄ± sÄ±fÄ±rlar
- `moveTo(MOTOR_X, 5000, 100)` â†’ X motoru 5000 encoder pozisyonuna gidiyor (zaten M komutunda anlattÄ±k, tekrar detaya girmeyeceÄŸim)
- `durum = CK_X1_GIDIYOR` â†’ ArtÄ±k `ckRun()` iÃ§inde bu case Ã§alÄ±ÅŸacak!

#### [1.4] loop() Devam Ediyor
```cpp
void loop() {
  moveToRun();  // â† X motoru segment iÅŸliyor
  kayitRun();   // KAPALI
  oynatmaRun(); // KAPALI
  ckRun();      // â† ÅÄ°MDÄ° AKTÄ°F! (durum = CK_X1_GIDIYOR)
  coRun();      // KAPALI
  
  if (Serial.available()) { ... }
}
```

---

### âš¡ [ADIM 2/7] ckRun() - CK_X1_GIDIYOR DURUMU

#### [2.1] ckRun() Ä°lk Ã‡aÄŸrÄ±
```cpp
void ckRun() {
  switch (durum) {
    case CK_KAPALI:
      return;  // â† ArtÄ±k buraya girmez!
    
    case CK_X1_GIDIYOR:  // â† BURAYA GÄ°RER!
      if (moveToBittiMi(MOTOR_X)) {  // X motoru bitti mi?
        // HenÃ¼z deÄŸil... (motor hala hareket ediyor)
      }
      break;
  }
}
```

#### [2.2] moveToRun() X Motorunu Ä°ÅŸliyor
```
loop() â†’ moveToRun() â†’ X motoru segment segment hedefe gidiyor
loop() â†’ ckRun() â†’ case CK_X1_GIDIYOR â†’ moveToBittiMi()? HayÄ±r â†’ break
loop() â†’ moveToRun() â†’ ...
loop() â†’ ckRun() â†’ moveToBittiMi()? HayÄ±r â†’ break
...
(Bu dÃ¶ngÃ¼ X motoru hedefe ulaÅŸana kadar devam eder)
```

**Ã–ZET:** `ckRun()` her loop'ta kontrol ediyor ama motor henÃ¼z hedefe ulaÅŸmadÄ±, o yÃ¼zden bekliyor.

#### [2.3] X Motoru Hedefe UlaÅŸtÄ±!
```cpp
// MoveTo.cpp - moveToRun() iÃ§inde
if (st[MOTOR_X].kalanPulse == 0) {
  st[MOTOR_X].aktif = false;
  st[MOTOR_X].bittiEdge = true;  // â† "Bitti" bayraÄŸÄ± kaldÄ±rÄ±ldÄ±
}
```

#### [2.4] ckRun() - Motor Bitti AlgÄ±landÄ±
```cpp
void ckRun() {
  switch (durum) {
    case CK_X1_GIDIYOR:
      if (moveToBittiMi(MOTOR_X)) {  // EVET! bittiEdge = true dÃ¶ndÃ¼
        // âœ… DURUM GEÃ‡Ä°ÅÄ° OLACAK!
        
        Serial.println(F("âœ“ X1 pozisyonuna ulaÅŸÄ±ldÄ±!\n"));
        Serial.print(F("  Mevcut X: "));
        Serial.println(xEnc->getPosition());  // Ã–rn: 5000
        
        Serial.println(F("\n[ADIM 2/7] KayÄ±t1 hazÄ±r."));
        Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"));
        Serial.println(F("  KayÄ±t1'i baÅŸlatmak iÃ§in 'Y' tuÅŸuna basÄ±n."));
        Serial.println(F("  Ä°ptal iÃ§in 'N' tuÅŸuna basÄ±n."));
        Serial.print(F("  > "));
        
        durum = CK_X1_ONAY_BEKLE;  // â† DURUM DEÄÄ°ÅTÄ°!
      }
      break;
  }
  // ckRun() bitti, return
}
```

**EKRANDA:**
```
âœ“ X1 pozisyonuna ulaÅŸÄ±ldÄ±!

  Mevcut X: 5000

[ADIM 2/7] KayÄ±t1 hazÄ±r.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  KayÄ±t1'i baÅŸlatmak iÃ§in 'Y' tuÅŸuna basÄ±n.
  Ä°ptal iÃ§in 'N' tuÅŸuna basÄ±n.
  > _
```

**Ã–NEMLÄ°:** ArtÄ±k `durum = CK_X1_ONAY_BEKLE` â†’ Bir sonraki `ckRun()` Ã§aÄŸrÄ±sÄ±nda bu case Ã§alÄ±ÅŸacak ve Serial.read() bekleyecek!

---

### âš¡ [ADIM 3/7] CK_X1_ONAY_BEKLE - KULLANICI 'Y' TUÅLADI

#### [3.1] ckRun() Her Loop'ta Kontrol Ediyor
```cpp
void ckRun() {
  switch (durum) {
    case CK_KAPALI:
      return;
    
    case CK_X1_GIDIYOR:
      // ... (artÄ±k buraya girmez)
      break;
    
    case CK_X1_ONAY_BEKLE:  // â† ÅÄ°MDÄ° BURAYA GÄ°RER!
      if (Serial.available()) {  // KullanÄ±cÄ± bir ÅŸey yazdÄ± mÄ±?
        // HenÃ¼z deÄŸil, kullanÄ±cÄ± bekliyor...
      }
      break;
  }
}
```

**DÃ–NGÃœ DEVAM EDER:**
```
loop() â†’ ckRun() â†’ case CK_X1_ONAY_BEKLE â†’ Serial.available()? HayÄ±r â†’ break
loop() â†’ ckRun() â†’ case CK_X1_ONAY_BEKLE â†’ Serial.available()? HayÄ±r â†’ break
...
(KullanÄ±cÄ± 'Y' yazana kadar bu dÃ¶ngÃ¼ devam eder)
```

#### [3.2] KullanÄ±cÄ± 'Y' YazdÄ±!
```
KullanÄ±cÄ± klavyeden: Y [Enter]
Serial buffer: 'Y'
```

#### [3.3] ckRun() - 'Y' AlgÄ±landÄ±
```cpp
void ckRun() {
  switch (durum) {
    case CK_X1_ONAY_BEKLE:
      if (Serial.available()) {  // EVET! Buffer'da 'Y' var
        char c = Serial.read();  // c = 'Y'
        
        if (c == 'Y' || c == 'y') {  // EVET!
          Serial.println(F("Y\n"));
          
          Serial.println(F("[ADIM 3/7] KayÄ±t1 baÅŸlatÄ±lÄ±yor...\n"));
          
          kayitBaslat(yon1);  // â† kayitBaslat(0) Ã§aÄŸrÄ±ldÄ±!
          
          durum = CK_KAYIT1_CALISIYOR;  // â† DURUM DEÄÄ°ÅTÄ°!
        }
        else if (c == 'N' || c == 'n') {
          Serial.println(F("N\n"));
          Serial.println(F("âœ— Ã‡ift kayÄ±t iptal edildi!\n"));
          durum = CK_KAPALI;  // â† Ä°ptal! BaÅŸa dÃ¶n
        }
      }
      break;
  }
}
```

**EKRANDA:**
```
Y

[ADIM 3/7] KayÄ±t1 baÅŸlatÄ±lÄ±yor...
```

#### â“ PEKI 'N' TUÅLASAYDIK?
```
[SENARYO] KullanÄ±cÄ± 'N' yazdÄ±

[NE OLUR]
  durum = CK_KAPALI  // â† Durum sÄ±fÄ±rlandÄ±
  
[LOOP DEVAM EDER]
  ckRun() â†’ case CK_KAPALI: return;  // HiÃ§bir ÅŸey yapmaz
  Serial.available() bekler  // Yeni komut beklenir

[KULLANICI ÅÄ°MDÄ° NE YAPABÄ°LÄ°R?]
  1. E â†’ Encoder'larÄ± kontrol et
  2. M â†’ Z'yi manuel sÃ¼r
  3. CK â†’ Tekrar Ã§ift kayÄ±t baÅŸlat
  4. S â†’ Acil durdur

[MOTORLAR NE DURUMDA?]
  X motoru: 5000 pozisyonunda DURDU (motor kapalÄ± deÄŸil, sadece pulse gÃ¶nderimi durdu)
  BIG motoru: Nerede kaldÄ±ysa orada
  Z motoru: Nerede kaldÄ±ysa orada

[Ã–NEMLÄ° NOT]
  'N' tuÅŸladÄ±ÄŸÄ±nda motorlar fiziksel olarak kapatÄ±lmaz!
  Sadece pulse gÃ¶nderimi durur, enable pinleri aktif kalÄ±r.
  Motorlar yerinde tutulur (TB6600 sÃ¼rÃ¼cÃ¼ aktif).
```

#### [3.4] kayitBaslat(0) Ä°Ã§inde
```cpp
// KayitModulu.cpp
void kayitBaslat(int yon) {
  Serial.println(F("[KAYIT] BaÅŸlatÄ±lÄ±yor..."));
  Serial.print(F("  YÃ¶n: "));
  Serial.println(yon ? F("Geri (16000â†’0)") : F("Ä°leri (0â†’16000)"));
  
  // [KONTROL 1] Encoder var mÄ±?
  if (bigEnc == nullptr) {  // âœ“ GeÃ§ti (var)
    Serial.println(F("âœ— Encoder ayarlanmamÄ±ÅŸ!"));
    return;
  }
  
  // [KONTROL 2] BaÅŸka kayÄ±t aktif mi?
  if (durum != KAYIT_KAPALI) {  // âœ“ GeÃ§ti (kapalÄ±)
    Serial.println(F("âœ— Zaten kayÄ±t var!"));
    return;
  }
  
  // [PARAMETRELER] (Config.h'den)
  // KAYIT_TOPLAM_PULSE = 16000
  // KAYIT_ARALIK = 160
  // KAYIT_HZ = 80
  // KAYIT_ORNEK_SAYISI = 101
  
  // [MOTOR BAÅLAT] BIG motor iÃ§in pulse gÃ¶nderimi
  useMotor(MOTOR_B);
  pulseAt(KAYIT_ARALIK, yon, KAYIT_HZ);  // â† pulseAt(160, 0, 80) Ã§aÄŸrÄ±ldÄ±!
  
  // [DURUM] KayÄ±t durumunu deÄŸiÅŸtir
  durum = KAYIT_HIZALAMA;  // â† DURUM DEÄÄ°ÅTÄ°!
  idx = 0;  // Ã–rnek index sÄ±fÄ±rla
  
  // kayitBaslat() bitti, return
}
```

**Ã–NEMLÄ° NOKTALAR:**
- `pulseAt(160, 0, 80)` â†’ BIG motor 160 pulse, ileri yÃ¶n, 80 Hz (zaten pulseAt'Ä± anlattÄ±k, tekrar etmeyeceÄŸim)
- `durum = KAYIT_HIZALAMA` â†’ KayÄ±t modÃ¼lÃ¼ aktif oldu!
- `idx = 0` â†’ Ä°lk Ã¶rnek (0. index)

#### [3.5] loop() Devam Ediyor
```cpp
void loop() {
  moveToRun();  // KAPALI (X motoru durdu)
  kayitRun();   // â† ÅÄ°MDÄ° AKTÄ°F! (durum = KAYIT_HIZALAMA)
  oynatmaRun(); // KAPALI
  ckRun();      // â† ÅÄ°MDÄ° AKTÄ°F! (durum = CK_KAYIT1_CALISIYOR)
  coRun();      // KAPALI
  
  if (Serial.available()) { ... }
}
```

---

### âš¡ [ADIM 4/7] kayitRun() - KAYIT_HIZALAMA DURUMU

#### [4.1] kayitRun() Ä°lk Ã‡aÄŸrÄ±
```cpp
void kayitRun() {
  switch (durum) {
    case KAYIT_KAPALI:
      return;  // â† ArtÄ±k buraya girmez!
    
    case KAYIT_HIZALAMA:  // â† BURAYA GÄ°RER!
      // [pulseAt arka planÄ±]
      useMotor(MOTOR_B);
      pulseAt(0, 0, 0);  // â† Arka plan modu (160 pulse gÃ¶nderiyor)
      
      // [KONTROL] Ä°lk segment bitti mi?
      if (pulseAtBittiMi(MOTOR_B)) {  // HenÃ¼z deÄŸil...
        // ...
      }
      break;
  }
}
```

**DÃ–NGÃœ DEVAM EDER:**
```
loop() â†’ kayitRun() â†’ pulseAt(0,0,0) â†’ Pulse gÃ¶nderiyor...
loop() â†’ kayitRun() â†’ pulseAt(0,0,0) â†’ Pulse gÃ¶nderiyor...
...
(160 pulse tamamlanana kadar)
```

#### [4.2] Ä°lk Segment (160 pulse) TamamlandÄ±
```cpp
void kayitRun() {
  switch (durum) {
    case KAYIT_HIZALAMA:
      useMotor(MOTOR_B);
      pulseAt(0, 0, 0);  // â† 160. pulse atÄ±ldÄ±, bittiEdge = true
      
      if (pulseAtBittiMi(MOTOR_B)) {  // EVET!
        // [Ä°LK Ã–RNEK] Encoder ve A0 oku
        long enc = bigEnc->getPosition();  // Ã–rn: 160
        uint16_t a0 = a0FiltreliOku();     // Ã–rn: 512
        
        samples[idx].enc = enc;
        samples[idx].a0 = a0;
        
        Serial.print(F("["));
        Serial.print(idx);
        Serial.print(F("] ENC: "));
        Serial.print(enc);
        Serial.print(F(" | A0: "));
        Serial.println(a0);
        
        idx++;  // idx = 1
        
        // [KONTROL] TÃ¼m Ã¶rnekler alÄ±ndÄ± mÄ±?
        if (idx >= KAYIT_ORNEK_SAYISI) {  // 1 >= 101? HAYIR
          // ...
        } else {
          // [SONRAKI SEGMENT] Bir sonraki 160 pulse baÅŸlat
          useMotor(MOTOR_B);
          pulseAt(KAYIT_ARALIK, yon, KAYIT_HZ);  // â† pulseAt(160, 0, 80)
          
          durum = KAYIT_CALISIYOR;  // â† DURUM DEÄÄ°ÅTÄ°!
        }
      }
      break;
  }
}
```

**EKRANDA:**
```
[0] ENC: 160 | A0: 512
```

---

### âš¡ [ADIM 5/7] kayitRun() - KAYIT_CALISIYOR DURUMU

#### [5.1] kayitRun() DÃ¶ngÃ¼sÃ¼
```cpp
void kayitRun() {
  switch (durum) {
    case KAYIT_CALISIYOR:  // â† BURAYA GÄ°RER!
      useMotor(MOTOR_B);
      pulseAt(0, 0, 0);  // â† Pulse gÃ¶nderiyor...
      
      if (pulseAtBittiMi(MOTOR_B)) {  // Segment bitti mi?
        // Her segment bitiÅŸinde:
        long enc = bigEnc->getPosition();
        uint16_t a0 = a0FiltreliOku();
        
        samples[idx].enc = enc;
        samples[idx].a0 = a0;
        
        Serial.print(F("["));
        Serial.print(idx);
        Serial.print(F("] ENC: "));
        Serial.print(enc);
        Serial.print(F(" | A0: "));
        Serial.println(a0);
        
        idx++;
        
        if (idx >= KAYIT_ORNEK_SAYISI) {  // 101. Ã¶rnek alÄ±ndÄ± mÄ±?
          Serial.println(F("\n[KAYIT] TamamlandÄ±! âœ“\n"));
          durum = KAYIT_TAMAMLANDI;  // â† DURUM DEÄÄ°ÅTÄ°!
        } else {
          // Sonraki segment
          useMotor(MOTOR_B);
          pulseAt(KAYIT_ARALIK, yon, KAYIT_HZ);
        }
      }
      break;
  }
}
```

**EKRANDA:**
```
[0] ENC: 160 | A0: 512
[1] ENC: 320 | A0: 518
[2] ENC: 480 | A0: 523
...
[99] ENC: 15840 | A0: 789
[100] ENC: 16000 | A0: 792

[KAYIT] TamamlandÄ±! âœ“
```

**Ã–NEMLÄ°:** 101 Ã¶rnek alÄ±ndÄ± (0-100 index), kayÄ±t tamamlandÄ±!

---

### âš¡ [ADIM 6/7] ckRun() - CK_KAYIT1_CALISIYOR DURUMU

#### [6.1] ckRun() DÃ¶ngÃ¼sÃ¼ (KayÄ±t1 devam ederken)
```cpp
void ckRun() {
  switch (durum) {
    case CK_KAYIT1_CALISIYOR:  // â† BURAYA GÄ°RER!
      if (kayitTamamlandiMi()) {  // KayÄ±t bitti mi?
        // HenÃ¼z deÄŸil... (kayitRun() hala Ã§alÄ±ÅŸÄ±yor)
      }
      break;
  }
}
```

**DÃ–NGÃœ DEVAM EDER:**
```
loop() â†’ kayitRun() â†’ Ã–rnekler alÄ±nÄ±yor...
loop() â†’ ckRun() â†’ case CK_KAYIT1_CALISIYOR â†’ kayitTamamlandiMi()? HayÄ±r â†’ break
...
```

#### [6.2] KayÄ±t1 TamamlandÄ±!
```cpp
void ckRun() {
  switch (durum) {
    case CK_KAYIT1_CALISIYOR:
      if (kayitTamamlandiMi()) {  // EVET! durum = KAYIT_TAMAMLANDI
        // âœ… KAYIT1 VERÄ°LERÄ°NÄ° KOPYALA
        
        const KM_Sample* kayitVerisi = kayitVerileri();  // â† KayitModulu'ndan ver
        
        // [KOPYALA] kayitVerisi â†’ kayit1 dizisine
        for (uint16_t i = 0; i < KAYIT_ORNEK_SAYISI; i++) {
          kayit1[i].enc = kayitVerisi[i].enc;
          kayit1[i].a0 = kayitVerisi[i].a0;
        }
        
        Serial.println(F("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"));
        Serial.println(F("â•‘              KAYIT1 TAMAMLANDI                 â•‘"));
        Serial.println(F("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"));
        Serial.println(F("  âœ“ 101 Ã¶rnek KayÄ±t1'e kopyalandÄ±.\n"));
        
        // [EKRAN] X2'ye geÃ§iÅŸ onayÄ± iste
        Serial.println(F("[ADIM 4/7] X2 pozisyonuna geÃ§iÅŸ"));
        Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"));
        Serial.print(F("  X2 pozisyonuna gitmek iÃ§in 'Y' tuÅŸuna basÄ±n."));
        Serial.println(F("\n  Ä°ptal iÃ§in 'N' tuÅŸuna basÄ±n."));
        Serial.print(F("  > "));
        
        durum = CK_X2_ONAY_BEKLE;  // â† DURUM DEÄÄ°ÅTÄ°!
      }
      break;
  }
}
```

**EKRANDA:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              KAYIT1 TAMAMLANDI                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  âœ“ 101 Ã¶rnek KayÄ±t1'e kopyalandÄ±.

[ADIM 4/7] X2 pozisyonuna geÃ§iÅŸ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  X2 pozisyonuna gitmek iÃ§in 'Y' tuÅŸuna basÄ±n.
  Ä°ptal iÃ§in 'N' tuÅŸuna basÄ±n.
  > _
```

#### â“ PEKI KAYIT1 SIRASINDA 'N' TUÅLASAYDIK?
```
[SENARYO] KayÄ±t1 alÄ±nÄ±rken (Ã¶rn. 50. Ã¶rnekte) kullanÄ±cÄ± 'N' bastÄ±

[NE OLUR]
  âŒ OLMAZ! ckRun() â†’ case CK_KAYIT1_CALISIYOR iÃ§inde Serial.read() yok!
  
[NEDEN?]
  KayÄ±t sÄ±rasÄ±nda kullanÄ±cÄ± mÃ¼dahalesi istemiyoruz.
  KayÄ±t 101 Ã¶rnek alÄ±nana kadar devam eder.
  
[EÄER Ä°PTAL ETMEK Ä°STERSEN]
  Acil durdurma: 'S' tuÅŸuna bas
  â†’ TÃ¼m motorlar durur
  â†’ ckDurdur() Ã§aÄŸrÄ±lÄ±r
  â†’ durum = CK_KAPALI
```

---

### âš¡ [ADIM 7/14] CK_X2_ONAY_BEKLE - KULLANICI 'Y' TUÅLADI

#### [7.1] ckRun() Her Loop'ta Kontrol Ediyor
```cpp
void ckRun() {
  switch (durum) {
    case CK_X2_ONAY_BEKLE:  // â† BURAYA GÄ°RER!
      if (Serial.available()) {  // KullanÄ±cÄ± bir ÅŸey yazdÄ± mÄ±?
        char c = Serial.read();  // c = 'Y'
        
        if (c == 'Y' || c == 'y') {
          Serial.println(F("Y\n"));
          
          Serial.println(F("[ADIM 5/7] X2 pozisyonuna gidiliyor...\n"));
          
          if (!moveTo(MOTOR_X, x2Hedef, 100)) {  // â† moveTo(MOTOR_X, 12000, 100)
            Serial.println(F("âœ— X motor hareket baÅŸlatÄ±lamadÄ±!"));
            durum = CK_KAPALI;
            return;
          }
          
          durum = CK_X2_GIDIYOR;  // â† DURUM DEÄÄ°ÅTÄ°!
        }
        else if (c == 'N' || c == 'n') {
          Serial.println(F("N\n"));
          Serial.println(F("âœ— Ã‡ift kayÄ±t iptal edildi!\n"));
          durum = CK_KAPALI;
        }
      }
      break;
  }
}
```

**EKRANDA:**
```
Y

[ADIM 5/7] X2 pozisyonuna gidiliyor...
```

#### â“ PEKI 'N' TUÅLASAYDIK?
```
[SENARYO] KullanÄ±cÄ± 'N' yazdÄ± (X2'ye gitmek istemedi)

[NE OLUR]
  durum = CK_KAPALI
  
[MOTORLAR NE DURUMDA?]
  X motoru: 5000 pozisyonunda (KayÄ±t1 pozisyonu)
  BIG motoru: 16000 pozisyonunda (KayÄ±t1 bittiÄŸi yer)
  Z motoru: Nerede kaldÄ±ysa orada
  
[VERÄ°LER NE DURUMDA?]
  âœ… KayÄ±t1: Tamamen kaydedildi (kayit1 dizisi dolu)
  âŒ KayÄ±t2: BoÅŸ (henÃ¼z alÄ±nmadÄ±)
  âŒ Global A0_min/max: HenÃ¼z hesaplanmadÄ±
  
[KULLANICI NE YAPABÄ°LÄ°R?]
  1. E â†’ Encoder'larÄ± kontrol et
  2. CK â†’ Tekrar Ã§ift kayÄ±t baÅŸlat (KayÄ±t1 tekrar alÄ±nÄ±r, Ã¶nceki kayÄ±t kaybolur!)
  3. S â†’ Acil durdur
  
[Ã–NEMLÄ° NOT]
  KayÄ±t1 verileri kayit1[] dizisinde kayÄ±tlÄ±.
  ANCAK Global A0 hesaplanmadÄ±ÄŸÄ± iÃ§in CO komutu Ã§alÄ±ÅŸmaz!
  CO komutu iÃ§in her iki kayÄ±t da gerekli.
```

---

### âš¡ [ADIM 8/14] ckRun() - CK_X2_GIDIYOR DURUMU

**NOT:** Bu aÅŸama CK_X1_GIDIYOR ile aynÄ± mantÄ±kta Ã§alÄ±ÅŸÄ±r. Tekrar etmeyeceÄŸim, Ã¶zet geÃ§eceÄŸim.

```
[Ã–ZET]
  1. X motoru 12000 pozisyonuna gidiyor (moveTo Ã§alÄ±ÅŸÄ±yor)
  2. ckRun() her loop'ta moveToBittiMi(MOTOR_X) kontrol ediyor
  3. X motoru hedefe ulaÅŸtÄ± â†’ durum = CK_X2_ONAY2_BEKLE
```

**EKRANDA:**
```
âœ“ X2 pozisyonuna ulaÅŸÄ±ldÄ±!

  Mevcut X: 12000

[ADIM 6/7] KayÄ±t2 hazÄ±r.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  KayÄ±t2'yi baÅŸlatmak iÃ§in 'Y' tuÅŸuna basÄ±n.
  Ä°ptal iÃ§in 'N' tuÅŸuna basÄ±n.
  > _
```

---

### âš¡ [ADIM 9/14] CK_X2_ONAY2_BEKLE - KULLANICI 'Y' TUÅLADI

**NOT:** Bu aÅŸama CK_X1_ONAY_BEKLE ile aynÄ± mantÄ±kta Ã§alÄ±ÅŸÄ±r. Ã–zet geÃ§iyorum.

```
[Ã–ZET]
  1. KullanÄ±cÄ± 'Y' yazdÄ±
  2. kayitBaslat(yon2) Ã§aÄŸrÄ±ldÄ± â†’ kayitBaslat(1) â†’ Geri yÃ¶n (16000â†’0)
  3. durum = CK_KAYIT2_CALISIYOR
```

---

### âš¡ [ADIM 10/14] kayitRun() - KAYIT2 ALINIYOR

**NOT:** KayÄ±t2, KayÄ±t1 ile aynÄ± mantÄ±kta alÄ±nÄ±r. Fark: BIG motor geri yÃ¶nde (16000â†’0)

```
[Ã–ZET]
  1. BIG motor 16000'den 0'a gidiyor (geri yÃ¶n)
  2. Her 160 pulse'da bir Ã¶rnek alÄ±nÄ±yor
  3. 101 Ã¶rnek alÄ±ndÄ± â†’ durum = KAYIT_TAMAMLANDI
```

**EKRANDA:**
```
[0] ENC: 15840 | A0: 789
[1] ENC: 15680 | A0: 783
[2] ENC: 15520 | A0: 777
...
[99] ENC: 160 | A0: 518
[100] ENC: 0 | A0: 512

[KAYIT] TamamlandÄ±! âœ“
```

---

### âš¡ [ADIM 11/14] ckRun() - CK_KAYIT2_CALISIYOR â†’ TAMAMLANDI

#### [11.1] KayÄ±t2 TamamlandÄ±
```cpp
void ckRun() {
  switch (durum) {
    case CK_KAYIT2_CALISIYOR:
      if (kayitTamamlandiMi()) {  // EVET!
        // âœ… KAYIT2 VERÄ°LERÄ°NÄ° KOPYALA
        
        const KM_Sample* kayitVerisi = kayitVerileri();
        
        for (uint16_t i = 0; i < KAYIT_ORNEK_SAYISI; i++) {
          kayit2[i].enc = kayitVerisi[i].enc;
          kayit2[i].a0 = kayitVerisi[i].a0;
        }
        
        Serial.println(F("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"));
        Serial.println(F("â•‘              KAYIT2 TAMAMLANDI                 â•‘"));
        Serial.println(F("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"));
        Serial.println(F("  âœ“ 101 Ã¶rnek KayÄ±t2'ye kopyalandÄ±.\n"));
        
        // âœ… GLOBAL A0_MIN/MAX HESAPLA
        globalA0Min = 1023;
        globalA0Max = 0;
        
        // KayÄ±t1'den min/max bul
        for (uint16_t i = 0; i < KAYIT_ORNEK_SAYISI; i++) {
          if (kayit1[i].a0 < globalA0Min) globalA0Min = kayit1[i].a0;
          if (kayit1[i].a0 > globalA0Max) globalA0Max = kayit1[i].a0;
        }
        
        // KayÄ±t2'den min/max bul
        for (uint16_t i = 0; i < KAYIT_ORNEK_SAYISI; i++) {
          if (kayit2[i].a0 < globalA0Min) globalA0Min = kayit2[i].a0;
          if (kayit2[i].a0 > globalA0Max) globalA0Max = kayit2[i].a0;
        }
        
        Serial.println(F("[ADIM 7/7] Global A0 AralÄ±ÄŸÄ± HesaplandÄ±"));
        Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"));
        Serial.print(F("  A0_min : "));
        Serial.println(globalA0Min);  // Ã–rn: 512
        Serial.print(F("  A0_max : "));
        Serial.println(globalA0Max);  // Ã–rn: 789
        Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n"));
        
        Serial.println(F("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"));
        Serial.println(F("â•‘         Ã‡Ä°FT KAYIT BAÅARIYLA TAMAMLANDI!      â•‘"));
        Serial.println(F("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"));
        Serial.println(F("  âœ… KayÄ±t1: 101 Ã¶rnek (X1 pozisyonu)"));
        Serial.println(F("  âœ… KayÄ±t2: 101 Ã¶rnek (X2 pozisyonu)"));
        Serial.println(F("  âœ… Global A0 aralÄ±ÄŸÄ±: 512 - 789"));
        Serial.println(F("\n  CO komutu ile oynatmaya hazÄ±r!\n"));
        
        durum = CK_TAMAMLANDI;  // â† DURUM DEÄÄ°ÅTÄ°!
      }
      break;
  }
}
```

**EKRANDA:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              KAYIT2 TAMAMLANDI                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  âœ“ 101 Ã¶rnek KayÄ±t2'ye kopyalandÄ±.

[ADIM 7/7] Global A0 AralÄ±ÄŸÄ± HesaplandÄ±
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  A0_min : 512
  A0_max : 789
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         Ã‡Ä°FT KAYIT BAÅARIYLA TAMAMLANDI!      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  âœ… KayÄ±t1: 101 Ã¶rnek (X1 pozisyonu)
  âœ… KayÄ±t2: 101 Ã¶rnek (X2 pozisyonu)
  âœ… Global A0 aralÄ±ÄŸÄ±: 512 - 789

  CO komutu ile oynatmaya hazÄ±r!
```

---

### ğŸ¯ CK KOMUTU SON DURUM

#### ckRun() - CK_TAMAMLANDI
```cpp
void ckRun() {
  switch (durum) {
    case CK_TAMAMLANDI:
      return;  // HiÃ§bir ÅŸey yapma (bekleme modunda)
  }
}
```

#### ckAktifMi() ve ckTamamlandiMi()
```cpp
bool ckAktifMi() {
  return (durum != CK_KAPALI && durum != CK_TAMAMLANDI);
  // false (kayÄ±t tamamlandÄ±)
}

bool ckTamamlandiMi() {
  return (durum == CK_TAMAMLANDI);
  // true
}
```

#### Veri Durumu
```
âœ… kayit1[] dizisi: 101 Ã¶rnek (X1=5000 pozisyonu, ileri yÃ¶n)
âœ… kayit2[] dizisi: 101 Ã¶rnek (X2=12000 pozisyonu, geri yÃ¶n)
âœ… globalA0Min: 512
âœ… globalA0Max: 789
```

#### Motor Durumu
```
X motoru: 12000 pozisyonunda (KayÄ±t2 pozisyonu)
BIG motoru: 0 pozisyonunda (KayÄ±t2 bittiÄŸi yer)
Z motoru: Nerede kaldÄ±ysa orada
```

---

## ğŸ¬ CO KOMUTU: Ã‡Ä°FT OYNATMA (Ä°LK DEPO)

### BAÅLANGIÃ‡ DURUMU
```
CK komutu tamamlandÄ±
KayÄ±t1 ve KayÄ±t2 hazÄ±r
Serial bekliyor
```

### âš¡ [ADIM 1/âˆ] 'CO' TUÅLANDI

#### [1.1] Serial Buffer'da 'C' Geldi
```cpp
// loop()
if (Serial.available()) {  // true
  char cmd = Serial.read();  // cmd = 'C'
  
  switch (cmd) {
    case 'C':
      if (Serial.available() == 0) delay(50);
      
      if (Serial.available() > 0) {
        char c2 = Serial.read();  // c2 = 'O'
        
        if (c2 == 'O' || c2 == 'o') {
          handleCiftOynatma();  // â† Ã‡aÄŸrÄ±ldÄ±!
        }
      }
      break;
  }
}
```

#### [1.2] handleCiftOynatma() Ä°Ã§inde
```cpp
void handleCiftOynatma() {
  // [KONTROL 1] KayÄ±t var mÄ±?
  if (!ckTamamlandiMi()) {
    Serial.println(F("\nâœ— KayÄ±t yok! Ã–nce CK komutu ile kayÄ±t alÄ±n."));
    return;
  }
  
  // [KONTROL 2] BaÅŸka iÅŸlem var mÄ±?
  if (coAktifMi() || kayitAktifMi() || oynatmaAktifMi()) {
    Serial.println(F("\nâœ— BaÅŸka bir iÅŸlem devam ediyor!"));
    return;
  }
  
  // [EKRAN] Parametreleri gÃ¶ster
  Serial.println(F("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"));
  Serial.println(F("â•‘         Ã‡Ä°FT OYNATMA PARAMETRELERÄ°             â•‘"));
  Serial.println(F("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"));
  
  Serial.print(F("  X1 Pozisyonu   : "));
  Serial.println(x1Pos);  // 5000
  
  Serial.print(F("  X2 Pozisyonu   : "));
  Serial.println(x2Pos);  // 12000
  
  Serial.print(F("  Global A0 Min  : "));
  Serial.println(ckGlobalA0Min());  // 512
  
  Serial.print(F("  Global A0 Max  : "));
  Serial.println(ckGlobalA0Max());  // 789
  
  Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"));
  Serial.println(F("  BIG Freq Min   : "));
  Serial.print(F("  [Mevcut: "));
  Serial.print(bigFreqMin);
  Serial.println(F("]"));
  Serial.print(F("  Yeni deÄŸer (Enter=deÄŸiÅŸtirme): "));
  
  // ... (parametre deÄŸiÅŸtirme arayÃ¼zÃ¼ - Ã¶zet geÃ§iyorum)
  
  Serial.println(F("\nBaÅŸlatÄ±lsÄ±n mÄ±? (Y/N)"));
  Serial.print(F("> "));
  
  while (Serial.available() == 0) delay(10);
  
  char onay = Serial.read();  // onay = 'Y'
  Serial.println(onay);
  
  if (onay == 'Y' || onay == 'y') {
    coBaslat(x1Pos, x2Pos);  // â† coBaslat() Ã§aÄŸrÄ±ldÄ±!
    Serial.println(F("\nâœ“ Ã‡ift oynatma baÅŸlatÄ±ldÄ±!"));
  }
}
```

**EKRANDA:**
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘         Ã‡Ä°FT OYNATMA PARAMETRELERÄ°             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  X1 Pozisyonu   : 5000
  X2 Pozisyonu   : 12000
  Global A0 Min  : 512
  Global A0 Max  : 789
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ... (parametre ayarlama)
  
BaÅŸlatÄ±lsÄ±n mÄ±? (Y/N)
> Y

âœ“ Ã‡ift oynatma baÅŸlatÄ±ldÄ±!
```

---

### âš¡ [ADIM 2/âˆ] coBaslat() - Ä°LK DEPO (Z SIFIRLAMA VAR)

#### [2.1] coBaslat(5000, 12000) Ä°Ã§inde
```cpp
// CiftOynatmaModulu.cpp
void coBaslat(long x1Enc, long x2Enc) {
  Serial.println(F("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"));
  Serial.println(F("â•‘          Ã‡Ä°FT OYNATMA BAÅLATILIYOR             â•‘"));
  Serial.println(F("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n"));
  
  // [KONTROL 1] Encoder'lar var mÄ±?
  if (bigEnc == nullptr || xEnc == nullptr || zEnc == nullptr) {
    Serial.println(F("âœ— Encoder hatasÄ±!"));
    return;
  }
  
  // [KONTROL 2] Parametreler var mÄ±?
  if (bigFreqMinPtr == nullptr || zEncMaxPtr == nullptr) {
    Serial.println(F("âœ— Parametre hatasÄ±!"));
    return;
  }
  
  // [PARAMETRELER] Kaydet
  x1Hedef = 5000;
  x2Hedef = 12000;
  globalA0Min = ckGlobalA0Min();  // 512
  globalA0Max = ckGlobalA0Max();  // 789
  
  // [KRÄ°TÄ°K] Z sÄ±fÄ±rlama bayraÄŸÄ± kontrolÃ¼
  if (!zSifirlandiMi) {
    // âœ… Ä°LK DEPO: Z sÄ±fÄ±rlama yapÄ±lacak
    
    Serial.println(F("\n[Ä°LK DEPO] Z sÄ±fÄ±rlama aÅŸamasÄ± gerekli."));
    Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"));
    Serial.println(F("  1. BIG & X motorlarÄ± A0_min konumuna gidecek"));
    Serial.println(F("  2. Torch manuel olarak yÃ¼zeye deÄŸdirilecek"));
    Serial.println(F("  3. Z encoder sÄ±fÄ±rlanacak (Z=0)"));
    Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n"));
    
    // [ADIM 1] BIG & X â†’ A0_min konumuna git
    Serial.println(F("[ADIM 1] A0_min konumuna gidiliyor..."));
    
    // A0_min konumu iÃ§in BIG encoder pozisyonu (KayÄ±t1 veya KayÄ±t2'den)
    const CK_Sample* k1 = ckKayit1Verileri();
    const CK_Sample* k2 = ckKayit2Verileri();
    
    // A0_min'e en yakÄ±n encoder pozisyonunu bul
    long bigHedef = k1[0].enc;  // Ã–rn: KayÄ±t1'in ilk pozisyonu
    
    if (!moveTo(MOTOR_B, bigHedef, 100)) {
      Serial.println(F("âœ— BIG motor hareket baÅŸlatÄ±lamadÄ±!"));
      return;
    }
    
    // X1 pozisyonuna git
    if (!moveTo(MOTOR_X, x1Hedef, 100)) {
      Serial.println(F("âœ— X motor hareket baÅŸlatÄ±lamadÄ±!"));
      return;
    }
    
    durum = CO_Z_SIFIRLAMA_HAZIRLIK;  // â† DURUM DEÄÄ°ÅTÄ°!
  }
  else {
    // âœ… SONRAKI DEPOLAR: Z sÄ±fÄ±rlama YOK
    // (Bu bÃ¶lÃ¼mÃ¼ ayrÄ±ca anlatacaÄŸÄ±m)
  }
}
```

---

### âš¡ [ADIM 3/âˆ] coRun() - CO_Z_SIFIRLAMA_HAZIRLIK

#### [3.1] loop() â†’ coRun() Aktif
```cpp
void loop() {
  moveToRun();  // â† BIG & X motorlarÄ± hareket ediyor
  coRun();      // â† CO_Z_SIFIRLAMA_HAZIRLIK kontrol ediyor
  ...
}
```

#### [3.2] coRun() - Motorlar Hareket Ediyor
```cpp
void coRun() {
  switch (durum) {
    case CO_Z_SIFIRLAMA_HAZIRLIK:
      if (!moveToAktifMi(MOTOR_B) && !moveToAktifMi(MOTOR_X)) {
        // Her ikisi de durdu mu? HenÃ¼z deÄŸil...
      }
      break;
  }
}
```

**DÃ–NGÃœ:** moveToRun() motorlarÄ± iÅŸliyor, coRun() bekliyor...

#### [3.3] Motorlar Hedefe UlaÅŸtÄ±
```cpp
case CO_Z_SIFIRLAMA_HAZIRLIK:
  if (!moveToAktifMi(MOTOR_B) && !moveToAktifMi(MOTOR_X)) {  // EVET!
    Serial.println(F("âœ“ A0_min konumuna ulaÅŸÄ±ldÄ±!\n"));
    Serial.print(F("  BIG: "));
    Serial.println(bigEnc->getPosition());  // Ã–rn: 160
    Serial.print(F("  X  : "));
    Serial.println(xEnc->getPosition());  // 5000
    
    Serial.println(F("\n[ADIM 2] Manuel Torch SÃ¼rme"));
    Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"));
    Serial.println(F("  Bu nokta en dÃ¼ÅŸÃ¼k A0 deÄŸerinin olduÄŸu yer."));
    Serial.println(F("  Torcu manuel olarak (M, P komutlarÄ± ile)"));
    Serial.println(F("  yÃ¼zeye yaklaÅŸtÄ±rÄ±n.\n"));
    Serial.println(F("  Torch yÃ¼zeye deÄŸdiÄŸinde 'Y' tuÅŸlayÄ±n."));
    Serial.println(F("  (Z encoder sÄ±fÄ±rlanacak: Z=0)"));
    Serial.println(F("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"));
    Serial.print(F("  > HazÄ±r mÄ±sÄ±nÄ±z? (Y/N): "));
    
    durum = CO_Z_SIFIRLAMA_ONAY;  // â† DURUM DEÄÄ°ÅTÄ°!
  }
  break;
```

---

### âš¡ [ADIM 4/âˆ] KullanÄ±cÄ± M Komutu ile Z'yi Ä°ndiriyor

**NOT:** Bu adÄ±m arada gerÃ§ekleÅŸir, coRun() bekliyor.

#### [4.1] KullanÄ±cÄ± 'M' TuÅŸladÄ±
```
Serial: M
â†’ Motor: Z
â†’ Hedef: -500
â†’ Max Hz: 50

moveTo(MOTOR_Z, -500, 50)  // â† Zaten anlattÄ±k (M komutu bÃ¶lÃ¼mÃ¼)
```

#### [4.2] loop() â†’ moveToRun() Z'yi Ä°ÅŸliyor
```cpp
void loop() {
  moveToRun();  // â† Z motoru aÅŸaÄŸÄ± iniyor
  coRun();      // â† CO_Z_SIFIRLAMA_ONAY (Serial bekliyor)
  ...
}
```

#### [4.3] Z Motoru Hedefe UlaÅŸtÄ±
```
moveToBittiMi(MOTOR_Z) = true
Z encoder = -500
(Torch yÃ¼zeye deÄŸdi!)
```

---

### âš¡ [ADIM 5/âˆ] KullanÄ±cÄ± 'Y' TuÅŸladÄ± â†’ Z SÄ±fÄ±rlama

#### [5.1] coRun() - CO_Z_SIFIRLAMA_ONAY
```cpp
case CO_Z_SIFIRLAMA_ONAY:
  if (Serial.available()) {  // KullanÄ±cÄ± 'Y' yazdÄ±
    char c = Serial.read();  // c = 'Y'
    
    if (c == 'Y' || c == 'y') {
      Serial.println(F("Y\n"));
      
      // [KRÄ°TÄ°K] Z ENCODER'I SIFIRLA
      zEnc->reset();  // â† Z encoder = 0
      
      // [KRÄ°TÄ°K] BAYRAK SET ET
      zSifirlandiMi = true;  // â† ArtÄ±k bir daha Z sÄ±fÄ±rlamaya gerek yok!
      
      Serial.println(F("âœ“ Z encoder sÄ±fÄ±rlandÄ±! (Z = 0)"));
      Serial.println(F("  Bu nokta artÄ±k kalÄ±cÄ± referans.\n"));
      
      // Z'yi gÃ¼venlik iÃ§in yukarÄ± kaldÄ±r
      Serial.println(F("[ADIM 3] KayÄ±t1 GeÃ§iÅŸi: Z YukarÄ±"));
      
      long zMaxPos = mapA0ToZ(globalA0Max);
      // globalA0Max = 789 â†’ zMaxPos â‰ˆ 8688
      
      Serial.print(F("  Z: 0 â†’ "));
      Serial.print(zMaxPos);
      Serial.println(F(" (GÃ¼venlik - YukarÄ±)"));
      
      moveTo(MOTOR_Z, zMaxPos, 2000);  // â† Z yukarÄ± Ã§Ä±kÄ±yor
      
      durum = CO_K1_GECIS_Z_YUKARI;  // â† DURUM DEÄÄ°ÅTÄ°!
    }
    else if (c == 'N' || c == 'n') {
      Serial.println(F("N\n"));
      Serial.println(F("âœ— Ã‡ift oynatma iptal edildi!\n"));
      durum = CO_KAPALI;  // â† Ä°ptal!
    }
  }
  break;
```

#### â“ PEKI 'N' TUÅLASAYDIK?
```
[NE OLUR]
  durum = CO_KAPALI
  Motorlar durur (neredeyse orada kalÄ±r)
  
[KULLANICI NE YAPABÄ°LÄ°R?]
  1. M/P â†’ Z'yi tekrar manuel sÃ¼rer
  2. CO â†’ Tekrar baÅŸlar (Z sÄ±fÄ±rlama aÅŸamasÄ± tekrar gelir Ã§Ã¼nkÃ¼ zSifirlandiMi = false)
  3. S â†’ Acil durdur (tÃ¼m motorlar)
```

---

### âš¡ [ADIM 6-âˆ] KayÄ±t1 ve KayÄ±t2 Oynatma

**NOT:** Oynatma aÅŸamalarÄ± (KayÄ±t1 yÃ¼kle, oynat, Z hareket, vb.) TAMAMEN AYNI mantÄ±kla Ã§alÄ±ÅŸÄ±r:
- moveTo() â†’ Zaten anlattÄ±k
- oynatmaBaslatGercek() â†’ OynatmaModulu kullanÄ±r (segment segment)
- Her durum geÃ§iÅŸi benzer mantÄ±k

**DURUM MAKÄ°NESÄ° GEÃ‡Ä°ÅLERÄ°:**
```
CO_K1_GECIS_Z_YUKARI       â†’ Z yukarÄ± Ã§Ä±kÄ±yor
CO_K1_GECIS_Z_YUKARI_BEKLE â†’ Z bitti mi?
CO_K1_GECIS_BIG_X          â†’ BIG & X â†’ KayÄ±t1[0]
CO_K1_GECIS_BIG_X_BEKLE    â†’ BIG & X bitti mi?
CO_K1_GECIS_Z_ASAGI        â†’ Z â†’ KayÄ±t1[0].a0
CO_K1_GECIS_Z_ASAGI_BEKLE  â†’ Z bitti mi?
CO_KAYIT1_YUKLENIYOR       â†’ KayÄ±t1 verilerini OynatmaModulu'ne yÃ¼kle
CO_KAYIT1_OYNATIYOR        â†’ oynatmaRun() aktif
CO_K2_GECIS_Z_YUKARI       â†’ Z yukarÄ± (KayÄ±t2'ye geÃ§iÅŸ)
...
CO_KAYIT2_OYNATIYOR        â†’ oynatmaRun() aktif
CO_TAMAMLANDI              â†’ Bitti!
```

**DETAY:** Bu aÅŸamalarÄ± Ã¶zet geÃ§iyorum Ã§Ã¼nkÃ¼ tekrar oluyor. Sorarsan detaylÄ±ca anlatabilirim!

---

## ğŸ”„ CO KOMUTU: Ã‡Ä°FT OYNATMA (SONRAKI DEPOLAR)

### BAÅLANGIÃ‡ DURUMU
```
Ä°lk depo tamamlandÄ± (zSifirlandiMi = true)
Yeni kayÄ±t alÄ±ndÄ± (CK komutu Ã§alÄ±ÅŸtÄ±)
coZSifirlamaReset() Ã§aÄŸrÄ±ldÄ± â†’ zSifirlandiMi = false
CO komutu tekrar Ã§aÄŸrÄ±ldÄ±
```

### âš¡ FARK: Z SIFIRLAMA YOK!

#### coBaslat() Ä°Ã§inde
```cpp
void coBaslat(long x1Enc, long x2Enc) {
  // ... (kontroller)
  
  if (!zSifirlandiMi) {
    // [Ä°LK DEPO YOLU]
    // Z sÄ±fÄ±rlama aÅŸamasÄ±...
  }
  else {
    // [SONRAKI DEPOLAR YOLU] â† BURAYA GÄ°RER!
    
    Serial.println(F("\n[SONRAKI DEPO] Z sÄ±fÄ±rlama atlanÄ±yor."));
    Serial.println(F("  Z encoder zaten kalibre edildi.\n"));
    
    // Direkt KayÄ±t1 geÃ§iÅŸine baÅŸla
    Serial.println(F("[ADIM 1] KayÄ±t1 GeÃ§iÅŸi: Z YukarÄ±"));
    
    long zMaxPos = mapA0ToZ(globalA0Max);
    moveTo(MOTOR_Z, zMaxPos, 2000);
    
    durum = CO_K1_GECIS_Z_YUKARI;  // â† Direkt geÃ§iÅŸ aÅŸamasÄ±na!
  }
}
```

**Ã–ZET:** Sonraki depolarda Z sÄ±fÄ±rlama aÅŸamasÄ± atlanÄ±r, direkt oynatmaya geÃ§ilir.

---

## ğŸš¨ OLASI SORUNLAR VE Ã‡Ã–ZÃœMLERÄ°

### âŒ SORUN 1: "Encoder hatasÄ±!"
```
[SEBEP] Encoder pointer'larÄ± null
[Ã‡Ã–ZÃœM] setup() iÃ§inde ckEncoderSetup(), coEncoderSetup() Ã§aÄŸrÄ±ldÄ± mÄ±?
```

### âŒ SORUN 2: "BaÅŸka bir iÅŸlem devam ediyor!"
```
[SEBEP] BaÅŸka bir modÃ¼l aktif (CK, CO, KayÄ±t, Oynatma)
[Ã‡Ã–ZÃœM] Mevcut iÅŸlemi bitir veya S komutu ile durdur
```

### âŒ SORUN 3: "KayÄ±t yok!"
```
[SEBEP] CK komutu Ã§alÄ±ÅŸtÄ±rÄ±lmadan CO Ã§alÄ±ÅŸtÄ±rÄ±ldÄ±
[Ã‡Ã–ZÃœM] Ã–nce CK komutu ile kayÄ±t al
```

### âŒ SORUN 4: Motor hareket etmiyor
```
[SEBEP 1] Enable pin HIGH (motor devre dÄ±ÅŸÄ±)
[Ã‡Ã–ZÃœM] pulseAt() enable pinini LOW yapÄ±yor mu kontrol et

[SEBEP 2] pulseAt() Ã§aÄŸrÄ±lmÄ±yor
[Ã‡Ã–ZÃœM] moveToRun() loop'ta Ã§aÄŸrÄ±lÄ±yor mu?

[SEBEP 3] Frekans Ã§ok dÃ¼ÅŸÃ¼k (1 Hz)
[Ã‡Ã–ZÃœM] HÄ±z parametresini artÄ±r
```

### âŒ SORUN 5: Z sÄ±fÄ±rlama her depoda tekrar istiyor
```
[SEBEP] zSifirlandiMi bayraÄŸÄ± sÄ±fÄ±rlanmÄ±ÅŸ
[Ã‡Ã–ZÃœM] CK komutu sonunda coZSifirlamaReset() Ã§aÄŸrÄ±lÄ±yor, bu normal.
        Yeni kayÄ±t alÄ±ndÄ±ÄŸÄ±nda Z sÄ±fÄ±rlama tekrar yapÄ±lmalÄ±.
```

### âŒ SORUN 6: Segment ortasÄ±nda duruyor
```
[SEBEP] pulseAt() arka plan modu Ã§aÄŸrÄ±lmÄ±yor
[Ã‡Ã–ZÃœM] moveToRun() her loop'ta Ã§aÄŸrÄ±ldÄ±ÄŸÄ±ndan emin ol
```

### âŒ SORUN 7: Serial.available() sonsuz dÃ¶ngÃ¼de takÄ±lÄ±yor
```
[SEBEP] KullanÄ±cÄ± hiÃ§bir ÅŸey yazmÄ±yor
[Ã‡Ã–ZÃœM] Timeout ekle:
  unsigned long baslangic = millis();
  while (Serial.available() == 0) {
    delay(10);
    if (millis() - baslangic > 30000) {  // 30 sn timeout
      Serial.println("Timeout!");
      return;
    }
  }
```

---

## ğŸ” PROJE TUTARSIZLIKLARI

### âœ… GENEL DURUM: Proje temiz ve tutarlÄ±!

Ä°ncelediÄŸim tÃ¼m dosyalarda (main.cpp, CiftKayitModulu.cpp, CiftOynatmaModulu.cpp, KayitModulu.cpp, MoveTo.cpp, PulseAt.cpp, OynatmaModulu.cpp) tutarsÄ±zlÄ±k gÃ¶rmedim.

**GÃœÃ‡LÃœ YÃ–NLER:**
1. âœ… Durum makineleri doÄŸru implement edilmiÅŸ
2. âœ… Non-blocking yapÄ± her yerde korunmuÅŸ
3. âœ… Edge detection (bittiMi fonksiyonlarÄ±) doÄŸru Ã§alÄ±ÅŸÄ±yor
4. âœ… Encoder pointer'larÄ± ve parametre pointer'larÄ± dÃ¼zenli yÃ¶netiliyor
5. âœ… Serial debug Ã§Ä±ktÄ±larÄ± kapsamlÄ± ve anlaÅŸÄ±lÄ±r

**DÄ°KKAT EDÄ°LMESÄ° GEREKENLER:**
1. âš ï¸ **pulseAt() arka plan modu:** Her loop'ta Ã§aÄŸrÄ±lmasÄ± kritik!
   ```cpp
   // âœ… DOÄRU
   loop() {
     moveToRun();  // â† Ä°Ã§inde pulseAt(0,0,0) Ã§aÄŸrÄ±lÄ±yor
     kayitRun();
     ...
   }
   
   // âŒ YANLIÅ
   loop() {
     if (motor_aktif) {  // â† KoÅŸula baÄŸlama!
       moveToRun();
     }
   }
   ```

2. âš ï¸ **Z sÄ±fÄ±rlama bayraÄŸÄ±:** Yeni kayÄ±t alÄ±ndÄ±ÄŸÄ±nda sÄ±fÄ±rlanmalÄ±
   ```cpp
   // âœ… DOÄRU (CiftKayitModulu.cpp)
   void ckBaslat(...) {
     coZSifirlamaReset();  // â† Ä°lk satÄ±r!
     ...
   }
   ```

3. âš ï¸ **Global A0 hesaplama:** Her iki kayÄ±t da tamamlanÄ±nca yapÄ±lmalÄ±
   ```cpp
   // âœ… DOÄRU (CiftKayitModulu.cpp - CK_KAYIT2_CALISIYOR iÃ§inde)
   if (kayitTamamlandiMi()) {
     // KayÄ±t2 verilerini kopyala
     // Global A0_min/max hesapla â† BURADA
   }
   ```

---

## ğŸ“ Ã–ZET: CK-CO SÄ°STEMÄ°

### CK KOMUTU (Ã‡ift KayÄ±t)
```
[AÅAMALAR]
  1. X1'e git â†’ Y/N â†’ KayÄ±t1 al (101 Ã¶rnek)
  2. X2'ye git â†’ Y/N â†’ KayÄ±t2 al (101 Ã¶rnek)
  3. Global A0_min/max hesapla

[SONUÃ‡]
  âœ… kayit1[] dizisi dolu
  âœ… kayit2[] dizisi dolu
  âœ… Global A0 aralÄ±ÄŸÄ± belirlendi
```

### CO KOMUTU (Ã‡ift Oynatma)
```
[Ä°LK DEPO]
  1. BIG & X â†’ A0_min konumuna
  2. Manuel torch sÃ¼rme â†’ Y/N â†’ Z=0
  3. KayÄ±t1 GeÃ§iÅŸi: Z yukarÄ± â†’ BIG & X â†’ KayÄ±t1[0] â†’ Z aÅŸaÄŸÄ±
  4. KayÄ±t1 oynat (segment segment)
  5. KayÄ±t2 GeÃ§iÅŸi: Z yukarÄ± â†’ BIG & X â†’ KayÄ±t2[0] â†’ Z aÅŸaÄŸÄ±
  6. KayÄ±t2 oynat

[SONRAKI DEPOLAR]
  - Z sÄ±fÄ±rlama atlanÄ±r (zSifirlandiMi = true)
  - Direkt KayÄ±t1 geÃ§iÅŸine baÅŸlar
```

### ARKA PLAN Ä°ÅLEYÄ°CÄ°LERÄ° (Her loop'ta)
```cpp
moveToRun();   // MoveTo segment iÅŸleme
kayitRun();    // KayÄ±t durum makinesi
oynatmaRun();  // Oynatma durum makinesi
ckRun();       // Ã‡ift KayÄ±t durum makinesi
coRun();       // Ã‡ift Oynatma durum makinesi
```

---

**ğŸ‰ TAMAMLANDI!** Bu dokÃ¼manda her ÅŸeyi ultra detaylÄ± anlattÄ±m. BaÅŸka sorular varsa sor kanka! ğŸ’ª